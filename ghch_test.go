package ghch

import (
	"reflect"
	"testing"
)

func TestParseVersions(t *testing.T) {
	input := `test-travis
v0.10.0
v0.10.1
v0.11.0
v0.11.1
v0.12.0
v0.12.1
v0.12.2
v0.12.3
v0.13.0
v0.14.0
v0.14.1
v0.14.2-alpha+msi
v0.14.2-alpha+msi2
v0.14.2-alpha+msi3
v0.14.2-alpha2+msi
v0.14.3
v0.15.0
v0.15.0-alpha+msi
v0.15.0-alpha+msi2
v0.15.0-k+msi
v0.15.0-k+msi2
v0.15.0-k+msi3
v0.15.0-k+msi4
v0.15.0-k-alpha+msi
v0.15.0-k-alpha+msi2
v0.16.0
v0.16.1
v0.17.0
v0.17.1
v0.17.1-k
v0.17.1-msi-go1.3.3
v0.18.0
v0.18.0-k
v0.18.1
v0.18.1-k
v0.19.0
v0.19.0-k
v0.20.0
v0.20.0-k
v0.20.1
v0.21.0
v0.22.0
v0.23.0
v0.23.1
v0.23.1-k
v0.24.0
v0.24.0-k
v0.24.1
v0.24.1-k
v0.25.0
v0.25.0-k
v0.25.1
v0.25.1-k
v0.26.0
v0.26.1
v0.26.2
v0.26.2-k
v0.27.0
v0.27.0-k
v0.27.1
v0.27.1-k
v0.28.0
v0.28.0-k
v0.28.1
v0.29.0
v0.29.0-k
v0.29.1
v0.29.1-k
v0.29.2
v0.30.0
v0.30.0-k
v0.30.1
v0.30.2
v0.6.0
v0.6.1
v0.7.0
v0.8.0
v0.9.0`

	expect := []string{
		"v0.30.2",
		"v0.30.1",
		"v0.30.0",
		"v0.29.2",
		"v0.29.1",
		"v0.29.0",
		"v0.28.1",
		"v0.28.0",
		"v0.27.1",
		"v0.27.0",
		"v0.26.2",
		"v0.26.1",
		"v0.26.0",
		"v0.25.1",
		"v0.25.0",
		"v0.24.1",
		"v0.24.0",
		"v0.23.1",
		"v0.23.0",
		"v0.22.0",
		"v0.21.0",
		"v0.20.1",
		"v0.20.0",
		"v0.19.0",
		"v0.18.1",
		"v0.18.0",
		"v0.17.1",
		"v0.17.0",
		"v0.16.1",
		"v0.16.0",
		"v0.15.0",
		"v0.14.3",
		"v0.14.1",
		"v0.14.0",
		"v0.13.0",
		"v0.12.3",
		"v0.12.2",
		"v0.12.1",
		"v0.12.0",
		"v0.11.1",
		"v0.11.0",
		"v0.10.1",
		"v0.10.0",
		"v0.9.0",
		"v0.8.0",
		"v0.7.0",
		"v0.6.1",
		"v0.6.0",
	}
	if !reflect.DeepEqual(parseVerions(input), expect) {
		t.Errorf("somthing went wrong")
	}
}
